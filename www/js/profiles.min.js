!function(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var r={};return i.m=n,i.c=r,i.p="",i(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=i(r);"undefined"!=typeof jQuery&&jQuery?!function(t){t.fn.gixi=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];t.seed=t.seed||this.data("gixiseed"),t.size=t.size||this.data("gixisize")||this.height(),t.size=Math.round(t.size),t.color=t.color||this.data("gixicolor");var e=new a["default"](t.size,t.seed);"undefined"!==t.color&&(e.fillStyle=t.color);var n=e.getImage();"IMG"!==this.prop("tagName")?this.css({"background-image":"url("+n+")"}):this.attr("src",n)}}(jQuery):false;"undefined"!=typeof window?window.GIXI=a["default"]:t.exports=a["default"],e["default"]=a["default"]},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=function(){function e(t){r(this,e),this.r=Math.floor(200*t.random()),this.g=Math.floor(200*t.random()),this.b=Math.floor(200*t.random()),this.t=1}return n(e,[{key:"rgba",value:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.t+")"}}]),e}(),i=function(){function i(){var t=arguments.length<=0||void 0===arguments[0]?60:arguments[0],e=arguments.length<=1||void 0===arguments[1]?Math.random():arguments[1];r(this,i),this.w=t,this.h=t,this.PARTITIONS=3,this.LESS_SEED=6,this.BASE_SEED=5,this.SEED_H=this.h/this.BASE_SEED,this.SEED_W=this.w/this.BASE_SEED,this.random_seed=0,e=e.toString();for(var n=0;n<e.length;n++)this.random_seed+=e.charCodeAt(n)}return n(i,[{key:"random",value:function(){return this.random_seed=Math.sin(34812*this.random_seed+.3),Math.abs(this.random_seed)}},{key:"getImage",value:function(){var t=document.createElement("canvas"),e=null;if(t.width=this.w,t.height=this.h,!t&&!t.getContext)throw new Error("Canvas does not supported");return this.drw=t.getContext("2d"),this.drw.fillStyle=this.fillStyle||new a(this).rgba(),this.map(this.grid()),e=t.toDataURL(),t=null,e}},{key:"draw",value:function(){this.drw.fillRect.apply(this.drw,arguments)}},{key:"map",value:function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)t[e][n]===!0&&(this.draw(this.SEED_H*e,this.SEED_W*n,this.SEED_W,this.SEED_H),e<this.PARTITIONS-1&&this.draw(this.SEED_H*(this.PARTITIONS+1-e),this.SEED_W*n,this.SEED_W,this.SEED_H))}},{key:"grid",value:function(){for(var i=this,t=function(){for(var n=[],t=0;t<i.PARTITIONS;t++){n[t]=[];for(var e=0;e<i.BASE_SEED;e++)n[t][e]=!!Math.floor(2*i.random())}return n[i.PARTITIONS-1]=n[i.PARTITIONS-1].map(function(t,e){return n[i.PARTITIONS-2][e]!==t&&!!Math.floor(2*i.random())}),{map:n,dots:function(){return n.map(function(t){return t.reduce(function(t,e){return e?t+e:t})}).reduce(function(t,e){return e+t})},isFilledTop:function(){return n.map(function(t){return t[0]}).reduce(function(t,e){return!(!t&&!e)})},isFilledBottom:function(){return n.map(function(t){return t[t.length-1]}).reduce(function(t,e){return!(!t&&!e)})}}},e=t();e.dots()<this.LESS_SEED||!e.isFilledTop()||!e.isFilledBottom();)e=t();return e.map}}]),i}();e["default"]=i}]);(function(){var s={website:"http://127.0.0.1:8080/www/profile/",host:"https://mainnet.nebulas.io",address:"n1zv4YirpBMxsUKNx525q1V5Gzub94nYumQ",card_width:230,card_height:110,animation_during:400};var t=require("nebulas");var r=t.Account;var a=new t.Neb;var o=0;a.setRequest(new t.HttpRequest(s.host));var c=[];document.body.onmousemove=function(t){for(var e=0,n=c.length;e<n;++e){c[e](t)}};var i=function(){if(arguments.length>0){var n=arguments[0];var i=[];for(var t=1;t<arguments.length;++t){i.push(arguments[t])}var e={then:function(t){this._then=t;return this},catch:function(t){this._catch=t;return this}};(function(e){var t;if(!t){t=r.NewAccount().getAddressString()}a.api.call({from:t,to:s.address,value:0,nonce:o++,gasPrice:1e6,gasLimit:2e6,contract:{function:n,args:JSON.stringify(i)}}).then(function(t){if(e._then)e._then(t)}).catch(function(t){if(e._catch)e._catch(t)})})(e);return e}};function h(r,t){this.data=t;this.elem=r;var a=this;this.is_display=false;r.onmouseenter=function(){if(!a.card){a.card=document.createElement("div");a.card.style.position="absolute";a.card.style.backgroundColor="#fff";a.card.style.boxShadow="0 0 2px #aaa";a.card.style.padding="0";a.card.style.margin="0";a.card.style.width="240px";a.card.style.height="110px";a.card.style.zIndex=100;a.iframe=document.createElement("iframe");a.iframe.setAttribute("src",s.website+"#"+a.data.hash);a.iframe.style.border="none";a.iframe.style.padding="0";a.iframe.style.margin="0";a.iframe.style.width="100%";a.iframe.style.height="100%";a.card.appendChild(a.iframe);a.cover=document.createElement("div");a.cover.style.backgroundColor="#fff";a.cover.style.position="absolute";a.cover.style.width="100%";a.cover.style.height="100%";a.cover.style.left="0px";a.cover.style.top="0px";a.cover.style.transition="opacity 300ms";a.card.appendChild(a.cover);a.iframe.onload=function(){setTimeout(function(){a.cover.style.opacity=0;setTimeout(function(){a.cover.style.display="none"},300)},100)};var t=document.body.scrollHeight;var e=document.body.scrollWidth;document.body.appendChild(a.card);var n={left:r.offsetLeft,top:r.offsetTop,right:r.offsetLeft+r.offsetWidth,bottom:r.offsetTop+r.offsetHeight};var i="px";if(n.bottom+s.card_height>=t&&n.top-s.card_height>0){a.card.style.top=n.top-s.card_height+i}else{a.card.style.top=n.bottom+i}if(n.left+s.card_width>e){a.card.style.left=n.right-s.card_width+i}else{a.card.style.left=n.left+i}}a.display()};function o(t,e){return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom}this.onmousemove=function(t){var e=a.elem.getBoundingClientRect();var n=a.card.getBoundingClientRect();var i={x:t.clientX,y:t.clientY};if(!o(e,i)&&!o(n,i)){a.miss();var r=c.indexOf(a.onmousemove);if(r>=0)c.splice(r,1)}}}h.prototype.display=function(){if(this.is_display)return;this.is_display=true;this.startAnimation();c.push(this.onmousemove)};h.prototype.miss=function(){if(!this.is_display)return;this.is_display=false;this.startAnimation(true)};h.prototype.startAnimation=function(n){var i=this;if(i.animationHandle){cancelAnimationFrame(i.animationHandle)}var r=0;i.card.style.display="block";function a(t){if(!r){r=t}else{var e=(t-r)/s.animation_during;if(e>1){e=1}i.update(n?1-e:e);if(e===1){if(n){i.card.style.display="none"}return}}i.animationHandle=requestAnimationFrame(a)}i.animationHandle=requestAnimationFrame(a)};h.prototype.update=function(t){this.card.style.opacity=t};window.Profiles={init:function(){var t=document.querySelectorAll("[data-wallet]"),e,n,i;for(e=0,n=t.length;e<n;++e){i=t[e];this.elem(i)}t=document.querySelectorAll("[data-wallet-image]");var r=this;for(e=0,n=t.length;e<n;++e){i=t[e];(function(e){var t=e.getAttribute("data-wallet-image");r.fetchImage(t).then(function(t){e.setAttribute("src",t)})})(i)}},elem:function(e){var n=e.getAttribute("data-wallet");this.fetch(n).then(function(t){if(t){e.innerText=t.name;new h(e,t)}else{new h(e,{hash:n})}}).catch(function(t){})},fetch:function(e){var n={then:function(t){this._then=t;return this},catch:function(t){this._catch=t;return this}};a.api.getAccountState({address:e}).then(function(t){i("fetch",e).then(function(t){if(n._then){n._then(JSON.parse(t.result))}}).catch(function(t){if(n._catch){n._catch(t)}})}).catch(function(t){if(n._catch){n._catch(t)}});return n},fetchImage:function(n){var i={then:function(t){this._then=t;return this},catch:function(t){this._catch=t;return this}};this.fetch(n).then(function(t){if(t){if(i._then){i._then(t.avatar)}}else{if(i._then){var e=new GIXI(96,n).getImage();i._then(e)}}}).catch(function(t){if(i._catch){i._catch(t)}});return i}}})();